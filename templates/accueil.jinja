{# Template pour l'accueil #}
{% extends "_layout.jinja" %}

{% block title %}Accueil | PianoServices{% endblock %}

{% block contenu %}


<div class="container mt-4">
    <h2 class="mb-4">Derniers services ajoutés</h2>
    <div class="row" id="services" data-role="{{session.role}}">
        {% if services %}
        {% for service in services %}
        <div class="col-sm-6 col-lg-4 mb-4">
            <div class="card">
                <img src="{{ url_for('static', filename='images/ajouts/' ~ service.photo) }}" class="card-img-top"
                    width="100" height="250" alt="Image du service">
                <div class="card-body">
                    <h5 class="card-title"> {{ service.titre }}</h5>
                    <p class="card-text">
                        <strong>Catégorie :</strong> {{ service.nom_categorie }} <br>
                        <strong>Localisation :</strong> {{ service.localisation }}
                    </p>
                    <a href="{{url_for('services.details_service', id_service=service.id_service)}}"
                        class="btn btn-primary m-2">Voir détails</a>
                    {% if session.identifiant and not service.est_proprietaire %}
                    <a href="{{url_for('services.reserver', id_service=service.id_service)}}"
                        class="btn btn-primary m-2">Reserver</a>
                    {% endif %}
                    {% if session.identifiant and (service.est_proprietaire or session.role=="admin") %}
                    <button id="supprimer-service-{{ loop.index0 }}" data-service="{{ service.id_service }}"
                        class="btn btn-danger m-2">
                        Supprimer
                    </button>
                    {% endif %}
                </div>
            </div>
        </div>
        {% endfor %}
        {% else %}
        <p>Aucun service actif pour le moment.</p>
        {% endif %}
    </div>
</div>

{% endblock %}
{%block recherche%}
<div class="container mt-3 position-relative" style="max-width: 600px;">
    <div class="d-flex position-relative">
        <input id="search" type="search" class="form-control" placeholder="Recherche..." aria-label="Recherche"
            autocomplete="off" />
        <div id="chargement"
            class="spinner-border text-primary d-none position-absolute top-50 end-0 translate-middle-y me-3"
            role="status" style="width: 1rem; height: 1rem;">
            <span class="visually-hidden">Chargement...</span>
        </div>
    </div>
    <ul id="resultats-recherche" class="list-group position-absolute top-100 start-0 w-100 z-3 d-none mt-1 shadow">
    </ul>
</div>
{% endblock %}
{% block script %}
<script defer src="/static/js/acceuil.js"></script>
<script defer src="/static/js/utils-ajax.js"></script>

{% endblock %}