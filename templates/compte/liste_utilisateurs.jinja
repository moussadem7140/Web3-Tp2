{% extends "_layout.jinja" %}

{% block contenu %}
<div class="container mt-5">
  <h2 class="text-center mb-4"  data-nombre="{{utilisateurs|length}}" id="utilisateurs">Gestion des utilisateurs</h2>
  <table class="table table-striped table-bordered text-center align-middle">
    <thead class="table-dark">
      <tr>
        <th>Courriel</th>
        <th>credit</th>
        <th>Rôle</th>
      </tr>
    </thead>
    <tbody>
      {% for i in range(0, utilisateurs|length) %}
      <tr id="afficher-{{utilisateurs[i].id_utilisateur}}">
        <td>{{ utilisateurs[i].courriel }}</td>
        <td>{{ utilisateurs[i].credit }}</td>
        <td>{{ utilisateurs[i].role}}</td>
        <td>
          {% if session.role == 'admin' %}
            <button type="submit" class="btn btn-danger btn-sm" data-utilisateur="{{utilisateurs[i].id_utilisateur}}" id="supprimer-{{i}}">Supprimer</button>
          {% else %}
          <span class="text-muted">Non autorisé</span>
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <div class="text-center mt-4">
    <a href="{{ url_for('accueil') }}" class="btn btn-secondary">Retour à l’accueil</a>
  </div>
</div>
{% endblock %}
{%block recherche%}
           <div class="container mt-3 position-relative" style="max-width: 600px;">
            <div class="d-flex position-relative">
                <input id="search" type="search" class="form-control" placeholder="Recherche..." aria-label="Recherche"
                    autocomplete="off" />
                <div id="chargement"
                    class="spinner-border text-primary d-none position-absolute top-50 end-0 translate-middle-y me-3"
                    role="status" style="width: 1rem; height: 1rem;">
                    <span class="visually-hidden">Chargement...</span>
                </div>
            </div>
            <ul id="resultats-recherche"
                class="list-group position-absolute top-100 start-0 w-100 z-3 d-none mt-1 shadow">
            </ul>
        </div>
    {% endblock %}
{% block script %}
        <script defer src="/static/js/liste_utilisateurs.js"></script>
        <script defer src="/static/js/utils-ajax.js"></script>
        <script defer src="/static/js/suppression.js"></script>
{% endblock %}